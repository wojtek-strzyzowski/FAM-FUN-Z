import{_ as P,r as l,o as R,a as C,c as z,d as D,M as K,b as d,e,j as N,f as n,v as L,g as p,h as U,F as V,B as J,k as r,u as j,t as E,p as q,i as H}from"./app-Cr2bYjbY.js";const a=c=>(q("data-v-5f64afa7"),c=c(),H(),c),W=a(()=>e("div",{class:"header"},[e("h1",null,"Beitrag erstellen")],-1)),X={class:"blog-fields"},Z={class:"form__group"},$=a(()=>e("label",{for:"categories",class:"form-label"},"Kategorien:",-1)),G=["value"],Q={class:"form__group"},Y=a(()=>e("label",{for:"thumbnail",class:"form-label"},"Bild hochladen:",-1)),ee={key:0,class:"form__group"},te=a(()=>e("label",{class:"form-label"},"Bildvorschau:",-1)),oe=["src"],se={class:"form__group"},le=a(()=>e("label",{for:"title",class:"form-label"},"Titel",-1)),ae={class:"form__group"},ne=a(()=>e("label",{for:"description",class:"form-label"},"Kurzbeschreibung:",-1)),re={class:"form__group"},ie=a(()=>e("label",{for:"content",class:"form-label"},"Inhalt:",-1)),de={class:"form-style"},ce={class:"form__group spacing"},ue=a(()=>e("div",{class:"header"},[e("h2",null,"Adresse:")],-1)),pe=a(()=>e("label",{for:"adress",class:"form-label"},"Adresse:",-1)),me=a(()=>e("label",{for:"zip",class:"form-label"},"Postleizahl:",-1)),_e=a(()=>e("label",{for:"city",class:"form-label"},"Stadt:",-1)),fe=a(()=>e("label",{for:"homepage",class:"form-label"},"Homepage:",-1)),ve={class:"form_group"},he=a(()=>e("h2",null,"Ausstattung:",-1)),ge={class:"big-container"},be={class:"label"},ye=["for"],xe={class:"checkbox"},Se=["id","value","onChange"],ke=a(()=>e("label",{for:"sonstiges",class:"form-label"},"Sonstiges:",-1)),we=a(()=>e("button",{type:"submit",class:"btn btn-primary"},"Beitrag erstellen",-1)),Be={__name:"CreateBlog",setup(c){const I=j(),m=l(""),_=l(""),f=l(""),v=l(null),h=l(null),g=l(""),b=l(""),y=l(""),x=l(""),u=l([]),A=l(""),S=l(""),k=l([]),B=l([]);R(async()=>{try{const s=await C.get("/api/categories");console.log("Kategorien geladen:",s.data),B.value=s.data}catch(s){console.error("Error loading categories:",s)}});const i=[{id:"toilet",label:"WC",selected:!1},{id:"drinking_water",label:"Trinkwasser",selected:!1},{id:"stroller_friendly",label:"Kinderwagen freundlich",selected:!1},{id:"changing_room",label:"Umkleide",selected:!1},{id:"restaurant_shopping",label:"Restaurant/Einkaufen",selected:!1}],F=s=>{const t=u.value.indexOf(s);t>-1?u.value.splice(t,1):u.value.push(s)},T=s=>{const t=s.target.files[0];if(v.value=t,t){const o=new FileReader;o.onload=w=>{h.value=w.target.result},o.readAsDataURL(t)}},M=l(""),O=async()=>{const s=new FormData;s.append("user_id",M.value),s.append("title",m.value),s.append("description",_.value),s.append("content",f.value),s.append("address",g.value),s.append("zip",b.value),s.append("city",y.value),s.append("homepage",x.value),s.append("category_id",k.value),u.value.forEach(t=>{i.forEach(o=>{t===o.id&&(o.selected=!0)})}),i.push({id:"sonstiges",label:S.value,selected:!0}),s.append("custom_special",JSON.stringify(i)),console.log(JSON.stringify(i)),s.append("additional_info",A.value),v.value&&s.append("thumbnail",v.value);try{const t=await C.post("/api/blog/store",s,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});console.log("API Response:",t.data),console.log(t.data.message),I.push({name:"SingleBlog",params:{id:t.data.id}})}catch(t){t.response?console.error("Error response:",t.response.data):console.error("Error:",t.message)}};return(s,t)=>(d(),z(K,{title:"Create Blog"},{default:D(()=>[W,e("div",X,[e("form",{method:"POST",action:"/blog/store",enctype:"multipart/form-data",onSubmit:N(O,["prevent"])},[e("div",Z,[$,n(e("select",{id:"categories",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>k.value=o),multiple:""},[(d(!0),p(V,null,U(B.value,o=>(d(),p("option",{key:o.id,value:o.id},E(o.name),9,G))),128))],512),[[L,k.value]])]),e("div",Q,[Y,e("input",{type:"file",class:"form-control",id:"thumbnail",onChange:T,name:"thumbnail"},null,32)]),h.value?(d(),p("div",ee,[te,e("img",{src:h.value,alt:"Thumbnail Preview",class:"thumbnail-preview"},null,8,oe)])):J("",!0),e("div",se,[le,n(e("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),name:"title"},null,512),[[r,m.value]])]),e("div",ae,[ne,n(e("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),name:"description"},null,512),[[r,_.value]])]),e("div",re,[ie,n(e("textarea",{class:"form-control",id:"content","onUpdate:modelValue":t[3]||(t[3]=o=>f.value=o),name:"content"},null,512),[[r,f.value]])]),e("div",de,[e("div",ce,[ue,pe,n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>g.value=o),type:"text",placeholder:"Adresse",class:"form-control"},null,512),[[r,g.value]]),me,n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>b.value=o),type:"text",placeholder:"PLZ",class:"form-control"},null,512),[[r,b.value]]),_e,n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>y.value=o),type:"text",placeholder:"Stadt",class:"form-control"},null,512),[[r,y.value]]),fe,n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>x.value=o),type:"text",placeholder:"homepage",class:"form-control"},null,512),[[r,x.value]])]),e("div",ve,[he,e("div",ge,[(d(),p(V,null,U(i,(o,w)=>e("div",{class:"checkbox_container",key:w},[e("div",be,[e("label",{for:o.id},E(o.label),9,ye)]),e("div",xe,[e("input",{type:"checkbox",id:o.id,value:o.id,onChange:Ce=>F(o.id)},null,40,Se)])])),64)),e("div",null,[ke,n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>S.value=o),type:"text",placeholder:"Sonstiges",class:"form-control"},null,512),[[r,S.value]])])])])]),we],32)])]),_:1}))}},Ve=P(Be,[["__scopeId","data-v-5f64afa7"]]);export{Ve as default};
